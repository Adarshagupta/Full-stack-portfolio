{% extends "base.html" %}

{% block content %}
<article class="research-item">
    <h1>{{ research.title }}</h1>
    <p class="text-muted">Created on: {{ research.created_at.strftime('%B %d, %Y') }}</p>
    
    <div class="research-content">
        {{ research.render_content()|safe }}
    </div>

    {% if current_user.is_authenticated %}
        <div class="admin-actions">
            <a href="{{ url_for('edit_research', research_id=research.id) }}" class="btn btn-primary">Edit</a>
            <form action="{{ url_for('archive_research', research_id=research.id) }}" method="POST" style="display: inline;">
                <button type="submit" class="btn btn-warning">
                    {% if research.is_archived %}Unarchive{% else %}Archive{% endif %}
                </button>
            </form>
            <form action="{{ url_for('delete_research', research_id=research.id) }}" method="POST" style="display: inline;">
                <button type="submit" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this research item?');">Delete</button>
            </form>
        </div>
    {% endif %}

    <div class="share-buttons">
        <a href="https://twitter.com/intent/tweet?url={{ share_url }}&text={{ share_text }}" target="_blank" class="btn btn-info">Share on Twitter</a>
        <a href="https://www.facebook.com/sharer/sharer.php?u={{ share_url }}" target="_blank" class="btn btn-primary">Share on Facebook</a>
        <a href="https://www.linkedin.com/shareArticle?url={{ share_url }}&title={{ research.title }}" target="_blank" class="btn btn-secondary">Share on LinkedIn</a>
    </div>
</article>
{% endblock %}
